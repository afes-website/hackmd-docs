###### tags: `GitHub`

# 計画書を練る書

## 目的

オンライン文化祭・オンサイト(生徒開催)のウェブサイト掲載で、僕らがやることや当日まで・当日の流れ(timeline)をまとめてほしい、と言われたからまとめる
DB構造もある程度考えておく
期限は、来週火曜まで

考える事はウェブサイト、入場管理のみ

1. 計画書を練る
2. 体裁を整えたり文体をまとめたり
3. 適宜図の挿入（タイムラインが図になってるとわかりいいよね

## 他の局と決めないといけない事リスト
- **【運営局】** 入り口のqrとかの読み取りの端末は？
- **【統制局】** 入り口のリストバンドは色分けする？
  - A. します。
- **【展示局・フロ局】** 各展示の出入り口に入退場をカウントする人員はある？
  - **【統制局】** →各展示で入場制限を設ける事ができるけどどうする?
- 入場時間ははじめから制限する？それともいつもどおりみたいな感じで「滞留者が〇〇人超えたら」みたいにする？
  - これはもともと時間指定チケットなのでは？
  - A. 時間指定です
- **【統制局】** 統制局は巡回する上で各展示の人数状況など知れると嬉しい？
  - A. Yes by ﾏﾂﾓﾄｹｰ
- **【展示局・行事局】** 結局YouTubeLiveを使いたいところはどこ？誰がセット・運営する？
  - A. 各ステージ前3箇所。運営は行事局なので僕らは手出ししない
  - Q. 計画書への記載はどっちがやるの？

### 作る画像リスト

- タイムライン
- リストバンドイメージ画像

## オンサイト

### まとめ

1. 予約システムを作る。個人情報はなるべく持たない
1. QRコードリストバンド
1. 各展示部屋でQRコード読み込んで滞在状況を見る
1. website上でも希望展示団体に展示物を出してもらう

### 予約の流れ

1. 予約formに予約申し込みをする
   - reserve table: reserveId, email, name, address, cellphone, people-count, timeId, guests(nullable)
   - 個人情報無しの場合: reserveId, email, people-count, timeId, guests(nullable)
1. 予約確認メールを送信→メール認証(reserveId使ってページにアクセス？) 期限2時間？
1. 予約状況を更新して、一定の割合になったら更新
1. 当日の入場に使うQRコードを送信（前日に再送？）

### 受付の流れ

ReserveとGuestは1対多の関係。また、Guestと行動記録も1対多の関係。Reserveと行動記録は直接の関係を持たない。

1. 各運営局員にあらかじめ使用方法の説明を行う。
   QRコード読み取りなどの操作は各個人のスマホを想定。タブレット端末等を設置できると嬉しいけど予算次第。
1. 来場者が提示したQRコードを読み取り
1. リストバンドに印字してあるQRコードを読み取り･ guest id と紐付け
   - guest table: guestId, reserveId, timeId, ActivityLog
1. その他の入場業務をしてもらう

### 各展示の入場時の流れ

1. 展示入口でカウント係の人が、入場者読取の画面を開いてリストバンドQRを読み取り（各展示員のスマホを使用？）
   - フロンティアは教室単位
3. 入場者読み取り画面・総務か統制の局から閲覧できる画面で各展示で入場中の人数が表示されるようにする
4. 警告を表示することもできる
   - 通知する内容
     - 次or今が最終展示（時間過ぎたら次が最終展示）
     - 展示スペースの定員超過 入場規制推奨
   - ヒートマップ出せると楽しいね
5. 展示退場口でも同様に、退場者読み取りの画面を開いて退場者のリストバンドを読み込む

### 当日

#### 来場者

1. 受付で何らかの方法で事前予約と照合
   - まにゅある整備
1. QRコード付きリストバンド（2hごとに色を変える？
   - 来場者１人につき１つの id
1. 各展示で入室時・退室時にQRコードスキャン
   - このあたりのマニュアルを整備する
   - スキャンが展示の負担になるのが課題
   - デバイス置けるといいけど、回線とかまで考えると予算が厳しい
     校内LANはありそうだけど使わせてもらえないだろうなぁ
   - でも展示員の端末･回線依存はあまりよくないかも。どうなんだろう
     無理な展示には貸し出しとか？回線の問題はあるが。
1. 2h 以上校内に滞在すると、入室ができなくなる
   - あまりやさしくないので最終展示とか？
   - ↑長時間滞在の原因になりそう
   - 最終展示表示、長くいる感じだったら統制を出す
   - 管理関連・滞在時間の同意をさせる（予約時）

#### ウェブサイト展示

1. 各展示で希望する団体に出し物ページを用意する
   - ブログ用に発行した ID･PW を転用
     - もっとたくさんアカウントを作らないと
3. 出し物ページは事前に全部出させて、教員と僕らのチェック
   - Accept までは事前にやっておく 公開はまた別のタイミング
   - 万が一のために教員Adminも用意
5. YouTube LIVE リンクを出す展示は事前に申請
   - 多分教員の許可制だよなぁと。
     ここの相談は各展示団体とさせるか、文実(行事局・展示局)の管轄になるでしょう
   - ある程度のPCでOBSのdelay配信が可能で、まずいことがあったときに切断できる、はず
6. オンライン用の特別企画的なのは要相談
   - 教員の目が行き届かないようなものはおそらく却下
   - 窓口は 行事･展示局→総務局→ウェブサイト班

#### 予約システムの話

@ibuki2003 このへんお願いしたい

- 予約 table, 来場者 table を作って、受付時に紐付け？
- 各展示での入退場は 1 table でいいのかな
    - 全部まとめて1tableでいいのでは 来場時刻(nullable)、所属展示
    - 有事のために行動ログを取っておきたい意図があるから…
    - 永続なら少し考えたほうがいいな
    - アクセス速度を考えると来場者tableにも現在位置は入れておいたほうがいいのかもな…
      どれくらい差が出るのかわからないけど
    - index張ればそんなに遅くならないと思う 最新の行の参照をおくのはありかも
    - 来場者数の予定は4500人くらいだから、O(N^2)とかならなきゃ動くしそこまで気にしなくていいと思う
    - 
- リストバンドのQRには来場者idを記載
- 予約時に取得する個人情報は 氏名, 居住市区町村, メアド, 緊急連絡用電話番号
  - 教員側は生徒の目に触れることを快く思っていなさそうなので、要検討
    外部記入可能のフォームを作ってもらって、そこに直接送りつければ教員のみ閲覧できるスプレに直接入れられる
  - 紙は受付が渋滞してあまりよくなさそう（人数絞るとはいえ、英検がニュースにまでなった原因なので）
    ペンの消毒とかめんどくさそうだからね
  - 取得方法は教員と要相談だけど、班からはDBを第1希望にしておこうかなぁと思います
    ウェブサイト班を信じるか、教員で負担を負うか
    - 完全に生徒の目に触れないようにするなら: 教員管理のフォーム
    - 一部生徒の目に触れてもいい: DB（予約idからデータを返すエンドポイント付き）
      ↑ただし有事の際、教員がすぐに閲覧できない問題はある
      - 個人情報取得のエンドポイントでデータをすべて返す訳はない
- 予約時に当日の情報取得まですべて同意を取る

#### 分科局

- 入場受付: 運営局
- 各展示: 展示局
- オンライン: 行事局, 展示局

### 当日までの流れ

当日: youtubeライブ管理 追加の展示物の確認作業　→班の外
前々日～前日: QRコード・入退場管理の説明会・デモ →最後のバグ修正
前々日まで: デバッグ
2週間前まで: ウェブサイト・システム構築を終わらせる

## オンライン

### まとめ

1. 各展示団体が展示物をウェブサイト上に掲載できるようにする
1. 必要ならYoutubeLive
   - 班内はリンクを張るだけでそれ以上はかかわらない
3. こっちは教員の立ち合いしながらの運営がおそらく必須になる、最悪Liveじゃなくなる可能性もあり
   - これは各展示や展示局との相談になるのでウェブサイト班管轄外
4. 要するにオンサイトでやるやつの展示だけ引き抜いたやつ

### 当日までにやること
当日: 追加展示物などの確認　→　藩の外
前日まで: 展示物の確認
1~2週間前: 展示物のアップロードの仕方などに関する講習会
1か月前まで: 展示一覧を作る



### f. 技術的な話
